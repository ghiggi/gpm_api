#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Thu Jan 12 13:37:53 2023

@author: ghiggi
"""

[tool.setuptools.packages.find]
where = ["gpm_api"]           # list of folders that contain the packages (["."] by default)
include = ["*"]   # package names should match these glob patterns (["*"] by default)
exclude = ["cli*",    # exclude packages matching these glob patterns (empty by default)
	       "tests*",
	       "*/gpm_api/0_OLD*",
]
namespaces = false  # to disable scanning PEP 420 namespaces (true by default)


# dynamic = ["version"] # use setuptools_scm for automatic versioning

# [tool.setuptools_scm]
# write_to = "gpm_api/_version.py"
# write_to_template = "__version__ = '{version}'"
# local_scheme = "no-local-version"
# fallback_version = "0.0.0.dev0"

# OR

# [tool.setuptools.dynamic]
# version = {attr = "gpm_api.VERSION"}

# OR using versioneer (see pyresample)
# - https://pypi.org/project/versioneer/

[tool.bumpver]
current_version = "0.0.1"
version_pattern = "MAJOR.MINOR.PATCH"
commit_message  = "Bump version {old_version} -> {new_version}"
commit          = true
tag             = true
push            = false

[tool.bumpver.file_patterns]
"pyproject.toml" = ['current_version = "{version}"', 'version = "{version}"']
"gpm_api/__init__.py" = ['__version__ = "{version}"']


[project.scripts]
download_gpm = "gpm_api.cli:download"

[tool.cibuildwheel]
## Switch to using build
# build-frontend = "build"
## Disable building PyPy wheels on all platforms, 32bit for py3.10/11 and musllinux builds, py3.6
# skip = ["cp36-*", "pp*", "cp31*-win32", "cp31*-manylinux_i686", "*-musllinux_*"]

# Run the package tests using `pytest`
# test-extras = "test"
# test-command = "pytest -v {package}/gpm_api/tests"

# Skip trying to test arm64 builds on Intel Macs
# test-skip = "*-macosx_arm64 *-macosx_universal2:arm64"
# no wheels for linux-32bit anymore for numpy>=1.22
# environment = "PIP_PREFER_BINARY=1"
